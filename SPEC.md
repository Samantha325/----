# 逃學大作戰 - 專案規格書

## 專案概述
這是一個純前端的 HTML5 遊戲，玩家需要在不被老師發現的情況下成功逃出教室。遊戲使用純 HTML、CSS 和 JavaScript 開發，所有外部依賴都使用 CDN 版本，以便於部署到 GitHub Pages。

## 技術棧
- HTML5
- CSS3
- JavaScript (ES6+)
- 外部依賴 (CDN):
  - SweetAlert2: 用於遊戲對話框
  - GSAP: 用於動畫效果

## 核心功能
### 已實現功能
1. 基礎遊戲機制
   - ✅ 使用方向鍵控制玩家移動（速度：5 pixel/frame）
   - ✅ 老師 AI 巡邏系統（基礎路徑：橢圓形）
   - ✅ 碰撞檢測（距離：40 pixel）
   - ✅ 計時器系統（遊戲時長：300秒）
   - ✅ 警戒值系統（上升速度：0.1/frame）

2. 遊戲 UI
   - ✅ 開始畫面（含標題和開始按鈕）
   - ✅ 遊戲計時器顯示
   - ✅ 警戒值指示器（顏色漸變效果）
   - ✅ 結束遊戲對話框（成功/失敗提示）

3. 視覺效果
   - ✅ 老師視線範圍顯示（200 pixel）
   - ✅ 警告動畫效果（0.6秒循環）
   - ✅ 出口門設計（含發光效果）
   - ✅ 基礎教室布局（4張課桌）

4. 互動系統
   - ✅ 老師追趕機制（速度：2 pixel/frame）
   - ✅ 近門感應系統（100 pixel 內發光）
   - ✅ 勝利條件檢測（接觸門口）

### 待開發功能
1. 遊戲增強
   - [ ] 音效系統
     - [ ] 腳步聲
     - [ ] 警告音效
     - [ ] 背景音樂
     - [ ] 勝利/失敗音效
   - [ ] 障礙物系統
     - [ ] 完善課桌碰撞檢測
     - [ ] 新增更多教室道具
   - [ ] 道具系統
     - [ ] 隱形藥水
     - [ ] 誘餌道具
     - [ ] 減速道具

2. 視覺升級
   - [ ] 精靈圖系統
     - [ ] 玩家角色動畫
     - [ ] 老師角色動畫
   - [ ] 場景優化
     - [ ] 教室背景設計
     - [ ] 光影效果
     - [ ] 粒子特效

3. 遊戲機制擴充
   - [ ] 關卡系統
     - [ ] 多個教室場景
     - [ ] 難度遞進
   - [ ] 成就系統
   - [ ] 計分系統
   - [ ] 存檔功能
   - [ ] 排行榜

4. 多功能支援
   - [ ] 移動設備支援
     - [ ] 觸控控制
     - [ ] 響應式設計
   - [ ] 多語言支援
   - [ ] 自訂關卡編輯器

## 目前遊戲參數設定
- 玩家移動速度：5 pixel/frame
- 老師移動速度：2 pixel/frame
- 遊戲時間限制：300秒
- 警戒值上升速度：0.1/frame（當玩家在老師視線範圍內）
- 老師視線範圍：200 pixel
- 碰撞檢測範圍：40 pixel
- 門感應範圍：100 pixel（發光效果）
- 勝利判定範圍：30 pixel（接觸門口）

## 檔案結構
- `index.html`: 遊戲主頁面
  - 基礎 HTML 結構
  - 外部資源引入（SweetAlert2, GSAP）
  - 遊戲元素布局
- `style.css`: 遊戲樣式
  - 遊戲容器樣式
  - 角色外觀設定
  - 動畫效果
  - UI 介面樣式
- `game.js`: 遊戲邏輯
  - `Game` 類別：主要遊戲邏輯
    - 初始化遊戲
    - 玩家控制
    - 老師 AI
    - 碰撞檢測
    - UI 管理

## 控制方式
- ↑：向上移動
- ↓：向下移動
- ←：向左移動
- →：向右移動

## 遊戲規則
### 勝利條件
1. 在時間結束前到達教室門口
2. 警戒值保持在 100% 以下
3. 避開老師的直接接觸

### 失敗條件
1. 被老師抓到（直接接觸）
2. 警戒值達到 100%
3. 時間結束前未能到達門口

## 開發注意事項
1. 維持純前端實現，確保部署便利性
2. 優先使用 CDN 資源，避免本地依賴
3. 保持程式碼簡潔，適當添加註解
4. 遵循模組化設計原則
5. 注意效能優化，特別是動畫和碰撞檢測部分

## 未來發展方向
1. 遊戲豐富度提升
   - 新增多樣化的關卡設計
   - 引入更多互動元素
   - 擴充道具系統
2. 使用者體驗優化
   - 改進視覺效果
   - 加入音效系統
   - 優化控制手感
3. 功能完善
   - 實現存檔功能
   - 新增排行榜系統
   - 支援移動設備

## 目前進度
- 完成基本遊戲框架
- 實現主要遊戲機制
- 完成初步的 UI 設計
- 實現老師的基本 AI 行為
- 完成遊戲勝利和失敗的判定邏輯

## 詳細開發狀態
- `index.html`
  - [x] 基礎 HTML 結構
  - [x] 遊戲畫面佈局
  - [ ] 音效檔案預載入

- `style.css`
  - [x] 遊戲主畫面樣式
  - [x] 遊戲結束畫面樣式
  - [ ] 音效控制按鈕樣式

- `game.js`
  - [x] 遊戲初始化邏輯
  - [x] 玩家控制邏輯
  - [x] 老師 AI 巡邏邏輯
  - [x] 碰撞檢測邏輯
  - [x] 勝利/失敗判定邏輯
  - [ ] 音效播放控制
  - [ ] 儲存遊戲進度功能
  - [ ] 讀取遊戲進度功能
  - [ ] 排行榜功能
